{% load static %}
<!DOCTYPE html>
<!-- Designined by CodingLab - youtube.com/codinglabyt -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title> Responsive Registration Form | CodingLab </title>
    <link rel="stylesheet" href="{% static 'style.css'%}">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
   </head>
<body>
  <div class="container">
    <div class="title">Registration</div>
    <div class="content">
      <form action="#" method="POST" onsubmit="return validateForm();">
        {% csrf_token %}
        <div class="user-details">
          <div class="input-box">
            <span class="details">Name</span>
            <input type="text"  name="name" id="name" placeholder="Enter your name" oninput="validateName('name')">
            <span id="nameError" class="error"></span>
        
          </div>
          <div class="input-box">
            <span class="details">Username</span>
            <input type="text" name="username" id="username" placeholder="Enter your username" oninput="validateUsername()">
            <span id="usernameError" class="error"></span>
            
          </div>
          <div class="input-box">
            <span class="details">Email</span>
            <input type="text" name="email" id="email" placeholder="Enter your email" oninput="validateEmail()">
            <span id="emailError" class="error"></span>
            
          </div>
          <div class="input-box">
            <span class="details">Phone Number</span>
            <input type="text" name="phoneNumber" id="phoneNumber" placeholder="Enter your number" oninput="validatePhoneNumber()">
            <span id="phoneNumberError" class="error"></span>
            
          </div>
          <div class="input-box">
				<span class="details">Password</span>
				<input type="password" name="password" id="password" placeholder="Enter your password" oninput="validatePassword()">
				<label for="showPassword">
                    </label>
				<span id="passwordError" class="error"></span>
        
			</div>

			<div class="input-box">
				<span class="details">Confirm Password</span>
				<input type="password" name="password" id="cpassword" placeholder="Confirm your password" oninput="validatePassword()">
				<label for="showCPassword">
				</label>
				<span id="cpasswordError" class="error"></span>
       
			</div>
		  <script>
			document.getElementById("showPassword").addEventListener("change", function () {
				var passwordInput = document.getElementById("password");
				if (this.checked) {
					passwordInput.type = "text"; // Show password
				} else {
					passwordInput.type = "password"; // Hide password
				}
			});

			document.getElementById("showCPassword").addEventListener("change", function () {
				var cpasswordInput = document.getElementById("cpassword");
				if (this.checked) {
					cpasswordInput.type = "text"; // Show confirm password
				} else {
					cpasswordInput.type = "password"; // Hide confirm password
				}
			});
			</script>

        </div>
		
        <div class="gender-details">
          <input type="radio" name="gender" id="dot-1">
          <input type="radio" name="gender" id="dot-2">
          <input type="radio" name="gender" id="dot-3">
          <span class="gender-title">Gender</span>
          <div class="category">
            <label for="dot-1">
            <span class="dot one"></span>
            <span class="gender">Male</span>
          </label>
          <label for="dot-2">
            <span class="dot two"></span>
            <span class="gender">Female</span>
          </label>
          <label for="dot-3">
            <span class="dot three"></span>
            <span class="gender">Others</span>
            </label>
            <div>
            <span id="genderError" class="error"></span> <!-- Add an error span for gender -->
            </div>
          </div>
        </div>
        <div class="button">
          <input type="submit" value="Register">
        </div>
        <div class="text sign-up-text"> have an account? <a href="/login">Login</a></div>
      </form>
    </div>
  </div>
  <script>
    function validateName(fieldName) {
      var name = document.getElementById(fieldName).value.trim();
      var nameError = document.getElementById(fieldName + "Error");
      var namePattern = /^[A-Za-z\s]{2,}$/; // At least two letters and spaces are allowed
  
      if (name === "") {
          nameError.textContent = "Please enter your " + fieldName + ".";
		  nameError.style.color = "red"; // Set error message color to red
          return false;
      } else if (!namePattern.test(name)) {
          nameError.textContent = fieldName + " should contain at least two letters.";
		  nameError.style.color = "red"; // Set error message color to red
          return false;
      } else {
          nameError.textContent = "";
          return true;
      }
  
    }
    function validateUsername() {
    var username = document.getElementById("username").value.trim();
    var usernameError = document.getElementById("usernameError");
    var usernamePattern = /^[A-Za-z0-9_]{3,20}$/; // Allow letters, numbers, and underscores; length between 3 and 20 characters

    if (username === "") {
        usernameError.textContent = "Please enter your username.";
		usernameError.style.color = "red"; // Set error message color to red
        return false;
    } else if (!usernamePattern.test(username)) {
        usernameError.textContent = "Username must be between 3 and 20 characters and can only contain letters, numbers, and underscores.";
		usernameError.style.color = "red"; // Set error message color to red
        return false;
    } else {
        usernameError.textContent = "";
        return true;
    }
}

    function validateEmail() {
        var email = document.getElementById("email").value.trim();
        var emailError = document.getElementById("emailError");
        var emailPattern = /^[A-Za-z]/; // Check if email starts with a letter
        var validEmailPattern = /\S+@\S+\.\S+/;

        if (email === "") {
            emailError.textContent = "Please enter your Email.";
			emailError.style.color = "red"; // Set error message color to red
            return false;
        } else if (!emailPattern.test(email) || !validEmailPattern.test(email)) {
            emailError.textContent = "Please enter a valid Email address.";
			emailError.style.color = "red"; // Set error message color to red
            return false;
        } else {
            emailError.textContent = "";
            return true;
        }
    }

    
	function validatePhoneNumber() {
		var phoneNumber = document.getElementById("phoneNumber").value.trim();
		var phoneNumberError = document.getElementById("phoneNumberError");
		var phoneNumberPattern = /^[6789]\d{9}$/; // Starts with 6, 7, 8, or 9 and has 10 digits

		if (phoneNumber === "") {
			phoneNumberError.textContent = "Please enter your phone number.";
			phoneNumberError.style.color = "red"; // Set error message color to red
			return false;
		} else if (!phoneNumberPattern.test(phoneNumber)) {
			phoneNumberError.textContent = "Invalid phone number. It should start with 6, 7, 8, or 9 and have 10 digits.";
			phoneNumberError.style.color = "red"; // Set error message color to red
			return false;
		} else {
			phoneNumberError.textContent = "";
			return true;
		}
	}



    function validatePassword() {
        var password = document.getElementById("password").value;
        var cpassword = document.getElementById("cpassword").value;
        var passwordError = document.getElementById("passwordError");
        var cpasswordError = document.getElementById("cpasswordError");

        if (password === "") {
            passwordError.textContent = "Please enter a Password.";
			passwordError.style.color = "red"; // Set error message color to red
            return false;
        } else if (password.length < 8) {
            passwordError.textContent = "Password must be at least 8 characters.";
			passwordError.style.color = "red"; // Set error message color to red
            return false;
        } else {
            passwordError.textContent = "";
        }

        if (cpassword === "") {
            cpasswordError.textContent = "Please confirm your password.";
			cpasswordError.style.color = "red"; // Set error message color to red
            return false;
        } else if (password !== cpassword) {
            cpasswordError.textContent = "Passwords do not match.";
			cpasswordError.style.color = "red"; // Set error message color to red
            return false;
        } else {
            cpasswordError.textContent = "";
            return true;
        }
    }

    function validateGender() {
      var genderRadios = document.getElementsByName("gender");
      var genderError = document.getElementById("genderError");
      var selectedGender = false;

      for (var i = 0; i < genderRadios.length; i++) {
          if (genderRadios[i].checked) {
              selectedGender = true;
              break;
          }
      }

      if (!selectedGender) {
          genderError.textContent = "Please select your Gender.";
          genderError.style.color = "red"; // Set error message color to red
          return false;
      } else {
          genderError.textContent = "";
          return true;
      }
  }


    function validateForm() {
      var isFormValid = true;

      if (!validateName("name")) {
        isFormValid = false;
      }

      if (!validateUsername()) {
        isFormValid = false;
      }

      if (!validateEmail()) {
        isFormValid = false;
      }

      if (!validatePhoneNumber()) {
        isFormValid = false;
      }

      if (!validatePassword()) {
        isFormValid = false;
      }

      if (!validateGender()) {
        isFormValid = false;
      }

      return isFormValid;
    }
</script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>
