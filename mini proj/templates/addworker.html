{% extends "agentpage.html" %}
{% block title %}Worker{% endblock %}
{% block content %}
    {% if messages %}
        {% for message in messages %}
            <div class="alert" role="alert">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <h1>Registration Form for Migratory Worker</h1>
        
        <form id="registrationForm" action="{% url 'addworker' %}" method="POST" enctype="multipart/form-data" onsubmit="return validateForm(event);">
            {% csrf_token %}
            <!-- Your other form elements -->
            <label for="first_name">Name:</label>
            <input type="text" name="first_name" id="name" oninput="validateName('name')">
            <span id="nameError" class="error"></span>
            
            <!-- Other fields -->
        
            <label for="nationality">Nationality:</label>
            <input type="text" id="nationality" name="nationality" oninput="validateNationality('nationality')">
            <span id="nationalityError" class="error"></span><br><br>
        
            <!-- Other fields -->
        
            <label for="passport_number">Passport Number:</label>
            <input type="text" id="passport_number" name="passport_number" oninput="validatePassportNumber('passport_number')">
            <span id="passportError" class="error"></span><br><br>

            <label for="dob_0">Date of Birth:</label>
            <input type="date" id="dob_0" name="dob_0" required onblur="validateDateOfBirth()"><br><br>
            <span id="dobError" class="error"></span>


            
            <label for="address">Address:</label>
            <textarea id="address" name="address" oninput="validateAddress()"></textarea><br><br>
            <span id="addressError" class="error"></span>

            
            <label for="contact_number">Contact Number:</label>
            <input type="tel" id="contact_number" name="contact_number" oninput="validateContactNumber()"><br><br>
            <span id="contactError" class="error"></span>
            
    
        <label for="work_assign">Assign Work:</label>
        <select id="work_assign" name="work_assign">
            <option value="select_work">Select Work</option>
            {% for category in categories %}
                <option value="{{ category.id }}">{{ category.name }}</option>
            {% endfor %}
        </select>
        <br><br>
    
        <label for="profile_image">Profile Image:</label>
        <input type="file" id="profile_image" name="profile_image" accept="image/*"><br><br>
    
        <label for="document">Upload Document or Government ID:</label>
        <input type="file" id="document" name="document" accept=".pdf, .doc, .docx, image/*"><br><br>
    
        <input type="submit" value="Submit">
    </form>
    <script>
        function validateName(inputID) {
            const name = document.getElementById(inputID).value.trim();
            const nameError = document.getElementById("nameError");
    
            if (name === "") {
                nameError.textContent = "Name is required";
                return false;
            } else {
                nameError.textContent = "";
                return true;
            }
        }
    
        function validateNationality(inputID) {
            const nationality = document.getElementById(inputID).value.trim();
            const nationalityError = document.getElementById("nationalityError");
    
            if (nationality === "") {
                nationalityError.textContent = "Nationality is required";
                return false;
            } else {
                nationalityError.textContent = "";
                return true;
            }
        }
    
        function validatePassportNumber(inputID) {
            const passportNumber = document.getElementById(inputID).value.trim();
            const passportError = document.getElementById("passportError");
    
            if (passportNumber === "") {
                passportError.textContent = "Passport number is required";
                return false;
            } else {
                passportError.textContent = "";
                return true;
            }
        }
    
        function validateDateOfBirth() {
            const dob = document.getElementById("dob_0").value.trim();
            const dobError = document.getElementById("dobError");
        
            if (dob === "") {
                dobError.textContent = "Date of Birth is required";
                return false;
            } else {
                dobError.textContent = "";
                return true;
            }
        }
        
        function validateAddress() {
            const address = document.getElementById("address").value.trim();
            const addressError = document.getElementById("addressError");
        
            if (address === "") {
                addressError.textContent = "Address is required";
                return false;
            } else {
                addressError.textContent = "";
                return true;
            }
        }
        
        function validateContactNumber() {
            const contactNumber = document.getElementById("contact_number").value.trim();
            const contactError = document.getElementById("contactError");
        
            if (contactNumber === "") {
                contactError.textContent = "Contact Number is required";
                return false;
            } else {
                contactError.textContent = "";
                return true;
            }
        }
        
        function validateForm(event) {
            const isNameValid = validateName('name');
            const isNationalityValid = validateNationality('nationality');
            const isPassportValid = validatePassportNumber('passport_number');
            const isDOBValid = validateDateOfBirth();
            const isAddressValid = validateAddress();
            const isContactValid = validateContactNumber();
        
            if (
                isNameValid &&
                isNationalityValid &&
                isPassportValid &&
                isDOBValid &&
                isAddressValid &&
                isContactValid
            ) {
                return true; // All fields are valid, proceed with form submission
            } else {
                event.preventDefault(); // Prevent form submission if any field is invalid
                return false;
            }
        }
        
    </script>
       
<style>
    body, h1, h2, h3, p, ul, li {
        margin: 0;
        padding: 0;
    }
    
    body {
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
    }
    
    h1 {
        text-align: center;
        margin: 20px 0;
    }
    
    form {
        width: 50%;
        margin: 0 auto;
        background-color: #fff;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
    
    label {
        display: block;
        font-weight: bold;
        margin-top: 10px;
    }
    
    input[type="text"],
    input[type="date"],
    input[type="tel"],
    input[type="email"],
    input[type="password"],
    select,
    textarea {
        width: 100%;
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 3px;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    
    select {
        height: 35px;
    }
    
    input[type="submit"] {
        background-color: #007BFF;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 3px;
        cursor: pointer;
        margin-top: 10px;
    }
    
    input[type="submit"]:hover {
        background-color: #0056b3;
    }
</style>




{% endblock content %}
